# AI VTuberシステム開発 議事録

## 📅 会議概要
- **日時**: 2024年9月3日
- **参加者**: ユーザー、AI Assistant
- **目的**: 最新AI技術を活用したAI VTuberシステムの構築
- **プロジェクト**: 1枚の画像からリアルタイム動画生成を行うAI VTuberシステム

## 🎯 プロジェクト目標
- **メイン目標**: Live2D Cubism Editorを使わずに、1枚の画像（yume_image.png）からAIによるリアルタイム動画生成を行い、TikTokやYouTube Liveで配信できるAI VTuberシステムを構築
- **キャラクター**: "もも"というAI VTuber
- **制約**: Live2D Cubism Editor PRO版の課金を回避、VTube Studio依存を排除

## 📋 要件定義書の作成・改善
### 初期要件定義書の問題点
- 技術的な調査・設計ドキュメントの形式になっていた
- 要件と実装が混在していた
- 数値目標が統一されていなかった

### 改善された要件定義書の特徴
- **機能要件**: キャラクター動作、感情表現、コメント解析、リアルタイム反応、配信機能、音声生成、リップシンク、AI人格、記憶機能、自動発話
- **非機能要件**: 
  - 性能: コメント解析0.5秒以内、動作開始0.5秒以内、音声生成2秒以内、配信遅延3秒以内
  - 品質: 1080p、60fps（最低30fps）
  - 可用性: 稼働率99.86%以上（月間ダウンタイム1時間以内）
- **技術要件**: コア技術（必須）と補完技術に分類
- **データベース**: PostgreSQL採用、具体的なスキーマ定義

## 🔧 Phase 1: 基盤構築（完了）
### 完了したタスク
1. **既存システム分析**
   - `main.py`と`.env`ファイルの詳細分析
   - 現在の"脳、声、動き"の仕組み理解
   - VTube Studio依存部分の特定

2. **データベース設計・実装**
   - PostgreSQLスキーマ設計
   - `database_schema.sql`作成
   - `database_manager.py`実装
   - ファイルベースメモリからDB移行

3. **AI技術調査**
   - 16のAI技術の詳細調査
   - `ai_technology_research.md`作成
   - API仕様と統合方法の検討

4. **統合アーキテクチャ設計**
   - `integration_architecture.py`作成
   - 新AIモジュールと既存システムの統合設計
   - 非同期処理パイプライン設計

### Phase 1完了レポート
- 基盤構築が完了し、Phase 2への準備が整った
- 既存システムの理解と新技術統合の設計が完了
- データベース移行の準備が完了

## 🚀 Phase 2: 最新AI技術の統合（進行中）
### 現在の進捗
1. **SadTalker環境構築** ✅ 完了
   - GitHubからクローン
   - `sadtalker_api.py`作成
   - APIラッパーの実装

2. **Wav2Lip環境構築** ✅ 完了
   - GitHubからクローン
   - `wav2lip_api.py`作成
   - リップシンク改善APIの実装

3. **API費用分析・無料代替案検討** ✅ 完了
   - 各APIの料金調査
   - 無料代替案の特定
   - コスト最適化戦略の策定

### 必要なAPI情報の整理
#### 既に設定済み（無料枠あり）
- **FishAudio**: Voice ID `e32d8978e5b740058b87310599f15b4d`
- **OpenAI**: gpt-4o-mini
- **Gemini**: gemini-2.0-flash-exp

#### 新規取得が必要（有料）
- **PixAI i2v v3.0**: 動画生成（料金不明）
- **RAIN**: リアルタイム処理（料金不明）
- **TikTok Live API**: 配信機能（料金不明）

## 💰 コスト分析と無料代替案の決定
### 完全無料で使える技術
- **SadTalker**: オープンソース、完全無料
- **Wav2Lip**: オープンソース、完全無料
- **Real-ESRGAN**: オープンソース、完全無料

### 無料枠がある技術
- **OpenAI API**: $5/月無料枠（既に設定済み）
- **FishAudio**: 無料枠あり（既に設定済み）
- **Gemini API**: 無料枠あり（既に設定済み）

### 有料APIの無料代替案
- **PixAI i2v v3.0** → **Stable Video Diffusion**（完全無料）
- **RAIN** → **StreamDiffusion**（完全無料）
- **TikTok Live API** → **OBS Studio + RTMP**（完全無料）

## 🏆 最終決定：最高性能無料AI VTuberシステム
### 最適な無料代替案構成
| コンポーネント | 最適な無料代替案 | 選定理由 |
|----------------|------------------|----------|
| **🧠 脳機能** | **LLaMA 3 (Meta AI)** | GPT-4oに匹敵する性能、完全無料、商用利用可能 |
| **🎤 音声生成** | **RVC (Retrieval-based Voice Conversion)** | 最高品質の声質クローン、感情表現豊か |
| **🎥 動画生成** | **Stable Video Diffusion (SVD)** | 業界標準、高品質・一貫性、完全無料 |
| **⚡ リアルタイム処理** | **StreamDiffusion** | リアルタイム動画生成、低遅延 |
| **💃 動き生成** | **SadTalker + Wav2Lip** | 自然な表情・リップシンク、完全無料 |
| **🛠️ 統合プラットフォーム** | **ComfyUI** | 視覚的パイプライン構築、全モデル統合 |
| **📡 配信システム** | **OBS Studio + RTMP** | 業界標準、安定配信、完全無料 |
| **💾 データベース** | **PostgreSQL** | 高性能、長期記憶、完全無料 |

### この構成の決定的な優位性
1. **コストゼロ**: ランニングコスト完全排除
2. **最高品質**: 商用サービスに匹敵する性能
3. **完全制御**: 外部API依存なし
4. **無限拡張**: オープンソースの柔軟性
5. **将来保証**: 技術進歩に自動対応

## 📋 実装計画
### Phase 2A: コア技術統合（今すぐ開始）
1. **LLaMA 3** セットアップ
2. **RVC** 音声モデル学習
3. **SVD + StreamDiffusion** 動画生成環境

### Phase 2B: 統合と最適化
4. **ComfyUI** パイプライン構築
5. **SadTalker + Wav2Lip** リップシンク統合
6. **OBS Studio** 配信設定

### Phase 2C: テストと調整
7. **統合テスト**
8. **パフォーマンス最適化**
9. **品質検証**

## 🔍 技術的検討事項
### 最新AI技術の調査結果
- **LLaMA 3**: Meta社開発、GPT-4oレベルの性能、完全無料
- **RVC**: 最高品質の音声変換、感情表現豊か、完全無料
- **Stable Video Diffusion**: 業界標準の動画生成、高品質・一貫性、完全無料
- **StreamDiffusion**: リアルタイム処理の革新、低遅延、完全無料

### 統合の課題と解決策
- **複雑性**: ComfyUIによる視覚的パイプライン管理
- **パフォーマンス**: RTX 4090による高速処理
- **安定性**: モジュール化による障害分離

## 📊 プロジェクト状況
### 完了済み
- ✅ Phase 1: 基盤構築
- ✅ 要件定義書の完成
- ✅ 既存システム分析
- ✅ データベース設計・実装
- ✅ AI技術調査
- ✅ 統合アーキテクチャ設計
- ✅ SadTalker環境構築
- ✅ Wav2Lip環境構築
- ✅ API費用分析・無料代替案検討

### 進行中
- 🔄 Phase 2: 最新AI技術の統合
- 🔄 最適な無料代替案の決定・実装

### 未着手
- ⏳ LLaMA 3セットアップ
- ⏳ RVC音声モデル学習
- ⏳ SVD + StreamDiffusion動画生成環境
- ⏳ ComfyUIパイプライン構築
- ⏳ 統合テスト・最適化

## 🎯 次のアクション
1. **LLaMA 3**のダウンロード・セットアップ
2. **RVC**の環境構築
3. **SVD**の統合テスト

## 📝 備考
- ユーザーは「お金はいくらかかるのかな？無料の代替えがあるなら新規取得APIはそっちを採用したい。無理なものは有料でも取得しますが失敗したら怖いよ～」とコストを重視
- 完全無料での実装を優先し、最高品質の無料代替案を選択
- 失敗リスクを最小限に抑える戦略を採用
- オープンソース技術を中心とした構成で将来性を確保

## 🔄 更新履歴
- 2024/09/03: 議事録作成
- 2024/09/03: Phase 1完了、Phase 2開始
- 2024/09/03: 無料代替案の最終決定